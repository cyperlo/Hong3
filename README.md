# Hong3 - 红桃3扑克牌游戏

一个基于 Web 的 4 人扑克牌游戏，支持实时在线对战。

## 🎮 游戏简介

Hong3（红桃3）是一款经典的 4 人扑克牌游戏，使用一副无大小王的扑克牌。游戏根据红桃3的分布自动判定队伍（1v3 或 2v2），但前端不显示队伍信息，增加了游戏的策略性和趣味性。

## ✨ 主要特性

- 🎯 **实时对战**：基于 WebSocket 的实时多人游戏体验
- 📱 **响应式设计**：完美适配手机和桌面浏览器
- 🎨 **现代化 UI**：美观流畅的用户界面
- 🤝 **自动匹配**：支持创建房间和加入房间
- 🎲 **智能规则**：完整的牌型判定和游戏逻辑
- 🔐 **隐藏队伍**：根据红桃3分布自动分队，增加游戏趣味性

## 🎯 游戏规则

### 牌与大小关系

- **牌面**：4 ~ 3，不含大小王
- **排序**（从小到大）：`4 < 5 < 6 < 7 < 8 < 9 < 10 < J < Q < K < A < 2 < 3`

### 牌型

- **单张**：一张牌
- **对子**：两张相同点数
- **顺子**：至少 5 张连续单牌，不能包含 3
- **连队**：至少 3 对连续对子，不能包含 3
- **炸弹**：3 张相同点数
- **大炸弹**：4 张相同点数

### 大小规则

- 顺子/连队按点数最大牌判断
- 炸弹 > 非炸弹牌型
- 大炸弹 > 普通炸弹

### 队友判定

- **同一人手中有两个红桃3** → 单人对三人（1v3）
- **红桃3分别在两个人手中（各一张）** → 2v2 队伍

**注意**：前端不显示队友信息，玩家需要通过手牌和桌面出牌推测队友。

### 出牌与回合规则

- 出牌顺序：逆时针
- 首轮出牌：必须由拥有红桃4的玩家出牌（红桃4可单出或作为顺子/连队一部分）
- 特殊规则：若玩家手中有四个4，则首轮可以任意出牌
- 出牌类型必须与当前桌面牌型相同，且点数更大
- 炸弹可以压制任意非炸弹牌型
- 4张炸弹可以压制3张炸弹

### 轮次结束

- 若连续无人出牌（全部过），最后出牌玩家获得本轮牌堆，累计牌数
- 轮次由最后出牌玩家重新开始

### 胜利条件

**1v3 模式**：
- 单人先出完手牌则胜利

**2v2 模式**：
- 若一队两名玩家先出完手牌 → 队伍胜利
- 若双方各一名玩家先出完，剩余两名玩家继续出牌
- 游戏结束后，按"双飞累计牌数"判断剩余牌归属，确定胜利队伍

## 🛠️ 技术栈

### 后端
- **Go** - 编程语言
- **Gin** - Web 框架
- **WebSocket** - 实时通信
- **Redis** - 缓存和会话存储
- **PostgreSQL** - 数据库

### 前端
- **Vue 3** - 前端框架
- **Vite** - 构建工具
- **WebSocket** - 实时通信

## 📦 安装与运行

### 环境要求

- Go 1.21+
- Node.js 18+
- PostgreSQL 14+
- Redis 7+

### 后端启动

```bash
cd backend

# 安装依赖
go mod download

# 运行服务器
go run main.go
```

后端默认运行在 `:8080` 端口

### 前端启动

```bash
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

前端默认运行在 `http://localhost:5173`

### 生产构建

```bash
# 构建前端
cd frontend
npm run build

# 构建后的文件在 frontend/dist 目录
```

## 📁 项目结构

```
Hong3/
├── backend/              # Go 后端
│   ├── api/             # API 路由
│   ├── game/            # 游戏逻辑
│   ├── models/          # 数据模型
│   ├── websocket/       # WebSocket 处理
│   └── main.go          # 入口文件
├── frontend/            # Vue 前端
│   ├── src/
│   │   ├── components/  # Vue 组件
│   │   ├── views/       # 页面视图
│   │   ├── store/       # 状态管理
│   │   └── main.js      # 入口文件
│   └── package.json
├── .gitignore
├── README.md            # 中文说明
└── README-en.md         # 英文说明
```

## 🎮 使用说明

1. **进入游戏**：
   - 打开浏览器访问前端地址
   - 输入玩家名称并连接

2. **创建/加入房间**：
   - 点击"创建房间"创建新房间
   - 或点击"刷新房间列表"查看可用房间并加入

3. **准备游戏**：
   - 等待4个玩家全部加入
   - 所有玩家点击"准备"按钮
   - 游戏自动开始

4. **游戏进行**：
   - 选择手牌（点击卡牌）
   - 点击"出牌"打出选中的牌
   - 或点击"过"跳过本轮
   - 可以使用"提示"按钮获得提示

## 🔧 配置说明

### 后端配置

后端默认配置：
- 端口：`8080`
- WebSocket 路径：`/ws`

可通过环境变量或配置文件修改（待实现）

### 前端配置

前端默认配置：
- 开发服务器端口：`5173`
- 后端 API 地址：自动从当前域名获取

如需修改后端地址，编辑 `frontend/src/store/gameStore.js` 中的 `getBackendUrl` 函数。

## 📱 移动端适配

- ✅ 响应式布局，适配各种屏幕尺寸
- ✅ 横屏优化，适合手机横屏使用
- ✅ 触摸滑动，手牌可横向滑动查看
- ✅ 支持通过 IP 访问，局域网内多人对战

## 🐛 问题反馈

如有问题或建议，请提交 Issue。

## 📄 许可证

MIT License

## 👥 贡献

欢迎提交 Pull Request！

---

**享受游戏，祝你好运！** 🎉

